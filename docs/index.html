<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Debug and Refactor magrittr Pipelines • pipecleaner</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Debug and Refactor magrittr Pipelines">
<meta property="og:description" content="Tools for refactoring and debugging magrittr pipelines.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">pipecleaner</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/alistaire47/pipecleaner/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="pipecleaner" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#pipecleaner" class="anchor"></a>pipecleaner</h1></div>

<p>pipecleaner is a utility R package to debug pipelines using the magrittr <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> pipe. Its <code>debug_pipeline</code> launches the debugging browser on the input pipeline in a form that allows the user to step through the successive calls of the pipeline, examining the output of each successive element.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>pipecleaner is not currently on CRAN, but can be installed with</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install.packages("remotes")</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"alistaire47/pipecleaner"</span>)</pre></div>
</div>
<div id="debugging-pipelines" class="section level2">
<h2 class="hasAnchor">
<a href="#debugging-pipelines" class="anchor"></a>Debugging pipelines</h2>
<p>To debug a pipeline, call <code>debug_pipeline</code> on the raw code or a character vector of code. If no input is supplied and it is called from <a href="https://www.rstudio.com/products/RStudio/">RStudio</a>, it will use whatever code is highlighed in the source editor as input.</p>
<p><code>debug_pipeline</code> can also be called via an <a href="https://rstudio.github.io/rstudioaddins/">RStudio add-in</a> by highlighting the pipeline to debug and then selecting “Debug pipeline in browser” from the “Addins” menu.</p>
<p>Once called, <code>debug_pipeline</code> will reassemble the pipeline into a function that can be debugged in the browser and call the debugger. Each line adds another call from the pipeline and prints and the output so the user can see the status of the data passed through the pipeline by stepping through the function.</p>
<p>The data is also stored to a variable called <code>dot[N]</code> in each line, where <code>[N]</code> is the index of the call, making it easy to compare input and output data of a step in the pipeline and try out new code formulations in the console.</p>
<p>All together, it looks like this:</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">magrittr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">pipecleaner</span>)

<span class="fu"><a href="reference/debug_pipeline.html">debug_pipeline</a></span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">5</span> <span class="kw">%&gt;%</span>
        <span class="no">rev</span> <span class="kw">%&gt;%</span>
        {<span class="no">.</span> * <span class="fl">2</span>} <span class="kw">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/r/base/sample.html">sample</a></span>(<span class="kw">replace</span> <span class="kw">=</span> <span class="fl">TRUE</span>)
)
<span class="co">#&gt; dot1 &lt;- rev(1:5)</span>
<span class="co">#&gt; dot2 &lt;- {dot1 * 2}</span>
<span class="co">#&gt; x &lt;- sample(dot2, replace = TRUE)debugging in: pipeline_function()</span>
<span class="co">#&gt; debug: {</span>
<span class="co">#&gt;     print(dot1 &lt;- rev(1:5))</span>
<span class="co">#&gt;     print(dot2 &lt;- {</span>
<span class="co">#&gt;         dot1 * 2</span>
<span class="co">#&gt;     })</span>
<span class="co">#&gt;     print(x &lt;- sample(dot2, replace = TRUE))</span>
<span class="co">#&gt; }</span>
<span class="co">#&gt; debug at /Users/alistaire/Documents/R_projects/pipecleaner/R/debug_pipeline.R#272: print(dot1 &lt;- rev(1:5))</span>
<span class="co">#&gt; [1] 5 4 3 2 1</span>
<span class="co">#&gt; debug: print(dot2 &lt;- {</span>
<span class="co">#&gt;     dot1 * 2</span>
<span class="co">#&gt; })</span>
<span class="co">#&gt; debug: dot1 * 2</span>
<span class="co">#&gt; [1] 10  8  6  4  2</span>
<span class="co">#&gt; debug: print(x &lt;- sample(dot2, replace = TRUE))</span>
<span class="co">#&gt; [1]  6 10  8  4 10</span>
<span class="co">#&gt; exiting from: pipeline_function()</span></pre></div>
</div>
<div id="bursting-pipes" class="section level2">
<h2 class="hasAnchor">
<a href="#bursting-pipes" class="anchor"></a>Bursting pipes</h2>
<p>Occasionally it is necessary to restructure code from a piped to an unpiped form. Now <code>burst_pipes</code> makes this sort of restructuring simple:</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="reference/burst_pipes.html">burst_pipes</a></span>(
    <span class="kw">x</span> <span class="kw">=</span> <span class="fl">1</span>:<span class="fl">5</span> <span class="kw">%&gt;%</span>
        <span class="no">rev</span> <span class="kw">%&gt;%</span>
        {<span class="no">.</span> * <span class="fl">2</span>} <span class="kw">%&gt;%</span>
        <span class="no">.</span>[<span class="fl">3</span>] <span class="kw">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">1</span>, <span class="no">.</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="no">.</span>/<span class="fl">10</span>)
  )
<span class="co">#&gt; dot1 &lt;- rev(1:5)</span>
<span class="co">#&gt; dot2 &lt;- {dot1 * 2}</span>
<span class="co">#&gt; dot3 &lt;- dot2[3]</span>
<span class="co">#&gt; x &lt;- rnorm(1, dot3, sd = dot3/10)</span></pre></div>
<p>More specific names can be specified as a character vector:</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="reference/burst_pipes.html">burst_pipes</a></span>(
    <span class="no">x</span> <span class="kw">&lt;-</span> <span class="fl">1</span>:<span class="fl">5</span> <span class="kw">%&gt;%</span>
        <span class="no">rev</span> <span class="kw">%&gt;%</span>
        {<span class="no">.</span> * <span class="fl">2</span>} <span class="kw">%&gt;%</span>
        <span class="no">.</span>[<span class="fl">3</span>] <span class="kw">%&gt;%</span>
        <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span>(<span class="fl">1</span>, <span class="no">.</span>, <span class="kw">sd</span> <span class="kw">=</span> <span class="no">.</span>/<span class="fl">10</span>),
    <span class="kw">names</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"reversed"</span>, <span class="st">"doubled"</span>, <span class="st">"third"</span>, <span class="st">"x"</span>)
)
<span class="co">#&gt; reversed &lt;- rev(1:5)</span>
<span class="co">#&gt; doubled &lt;- {reversed * 2}</span>
<span class="co">#&gt; third &lt;- doubled[3]</span>
<span class="co">#&gt; x &lt;- rnorm(1, third, sd = third/10)</span></pre></div>
<p><code>burst_pipes</code> can also be called via a pair of RStudio add-ins, which replace the highlighted code with its restructured form. The “Burst pipes” add-in creates names; the “Burst pipes and set names” add-in allows custom names to be set.</p>
</div>
<div id="limitations" class="section level2">
<h2 class="hasAnchor">
<a href="#limitations" class="anchor"></a>Limitations</h2>
<p>pipecleaner should successfully debug most pipelines. However, due to its structure, it does have known limitations:</p>
<ul>
<li>Only the <code><a href="https://rdrr.io/pkg/magrittr/man/pipe.html">%&gt;%</a></code> pipe is handled, not more exotic pipes like <code><a href="https://rdrr.io/pkg/magrittr/man/exposition.html">%$%</a></code>. For the moment, this is unlikely to change absent significant demand.</li>
<li>Nested pipelines—e.g. piping within an anonymous function in <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map</a></code>—are ignored; the whole call is treated as one step.</li>
</ul>
</div>
<div id="related" class="section level2">
<h2 class="hasAnchor">
<a href="#related" class="anchor"></a>Related</h2>
<ul>
<li>
<a href="https://github.com/daranzolin/ViewPipeSteps">ViewPipeSteps</a> is a similar project that calls <code><a href="https://rdrr.io/r/utils/View.html">View()</a></code> after each step in the pipeline.</li>
<li>magrittr itself contains <code>debug_pipe</code>, which is a wrapper around <code>browser</code> that returns its input, allowing it to be inserted within a pipeline.</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/alistaire47/pipecleaner/">https://​github.com/​alistaire47/​pipecleaner/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/alistaire47/pipecleaner/issues">https://​github.com/​alistaire47/​pipecleaner/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://alistaire.rbind.io/">Edward Visel</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-2811-6254" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/alistaire47/pipecleaner"><img src="https://travis-ci.org/alistaire47/pipecleaner.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://ci.appveyor.com/project/alistaire47/pipecleaner"><img src="https://ci.appveyor.com/api/projects/status/agx2ht7cpwrnrk0k?svg=true" alt="AppVeyor build status"></a></li>
<li><a href="https://codecov.io/github/alistaire47/pipecleaner?branch=master"><img src="https://codecov.io/gh/alistaire47/pipecleaner/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://cran.r-project.org/package=pipecleaner"><img src="https://www.r-pkg.org/badges/version/pipecleaner" alt="CRAN status"></a></li>
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://alistaire.rbind.io/">Edward Visel</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
